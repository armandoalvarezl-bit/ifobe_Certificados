<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plataforma de Certificados IFOBE</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    body {
      background-color: #051a30;
      background-image: url('img/fonfo2 (1).png');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      min-height: 100vh;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .container-principal {
      display: flex;
      flex-wrap: wrap;
      gap: 0;
      justify-content: center;
      align-items: stretch;
      max-width: 1100px;
      width: 100%;
      padding: 30px;
      background: rgba(255,255,255,0.98);
      border-radius: 16px;
      box-shadow: 0 0 25px rgba(0,0,0,0.4);
    }

    .columna {
      flex: 1 1 50%;
      padding: 30px;
    }

    .separador {
      width: 2px;
      background-color: #d3d3d3;
      margin: 20px 0;
    }

    .logo {
      max-width: 250px;
      margin-bottom: 20px;
    }

    h2 {
      color: #0a2740;
      font-weight: bold;
    }

    label {
      font-weight: 500;
    }

    .btn {
      width: 100%;
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    .btn:hover {
      transform: scale(1.03);
      filter: brightness(1.1);
    }

    .footer-text {
      font-size: 0.9rem;
      color: #444;
      margin-top: 20px;
      text-align: justify;
    }

    @media (max-width: 992px) {
      .container-principal {
        flex-direction: column;
      }
      .separador {
        display: none;
      }
    }
  </style>
</head>
<body>

  <div class="container-principal">

    <!-- COLUMNA IZQUIERDA: LOGO Y PRESENTACIÓN -->
    <div class="columna text-center d-flex flex-column justify-content-center">
      <img src="img/ChatGPT Image 27 oct 2025, 03_33_45 p.m..png" alt="Logo IFOBE" class="logo mx-auto">
      <h2>Plataforma Interna de Certificados IFOBE</h2>
      <p class="footer-text">
        Esta plataforma permite validar información y generar certificados oficiales del Instituto de Formación IFOBE.  
        Al usar el sistema, acepta que sus datos sean tratados conforme a la Ley de Protección de Datos Personales.  
        Sus registros se mantienen bajo estándares de seguridad institucional.
      </p>
    </div>

    <!-- LÍNEA DIVISORIA -->
    <div class="separador"></div>

    <!-- COLUMNA DERECHA: FORMULARIO -->
    <div class="columna">
      <h2 class="mb-3 text-center">Validador de Información</h2>

      <div class="mb-3">
        <label for="cedula" class="form-label">Cédula del estudiante</label>
        <input type="text" id="cedula" class="form-control" maxlength="10" placeholder="Ej: 1234567890">
      </div>

      <div class="mb-3">
        <label for="nombre" class="form-label">Nombre del estudiante</label>
        <input type="text" id="nombre" class="form-control" readonly>
      </div>

      <button class="btn btn-primary mb-4" onclick="validarCedula()">Validar Cédula</button>

      <h5 class="text-center mb-3">Seleccionar Programa</h5>

      <div class="mb-4">
        <label for="programa" class="form-label">Nombre del programa</label>
        <select id="programa" class="form-select">
          <option value="">Seleccione un programa...</option>
          <option>Ofimática Básica</option>
          <option>Excel Avanzado</option>
          <option>Diseño Gráfico Digital</option>
          <option>Contabilidad Digital</option>
          <option>Marketing Digital</option>
          <option>Desarrollo Web</option>
          <option>Atención al Cliente</option>
          <option>Gestión Empresarial</option>
          <option>Emprendimiento e Innovación</option>
          <option>Curso en TICs</option>
        </select>
      </div>

      <button class="btn btn-success mb-3" onclick="generarDiploma()">Generar Diploma</button>
      <button class="btn btn-danger" onclick="cerrarSesion()">Cerrar Sesión</button>
    </div>

  </div>

  <script>
    const datosUsuarios = {
      "16053251": "Álvarez Armando José",
      "32288072": "Alvarez Orosco Cesar Augusto",
      "7523962": "Borja Ramirez Manuel Antonio"
    };

    function cerrarSesion() {
      Swal.fire({
        icon: 'info',
        title: 'Sesión finalizada',
        text: 'Será redirigido a la página principal.',
        confirmButtonText: 'Aceptar'
      }).then(() => {
        window.location.href = 'index.html';
      });
    }

    function validarCedula() {
      const cedula = document.getElementById("cedula").value.trim();
      const nombreField = document.getElementById("nombre");

      if (!cedula.match(/^[0-9]{6,10}$/)) {
        Swal.fire('Atención', 'Ingrese una cédula válida (6 a 10 dígitos numéricos).', 'warning');
        return;
      }

      if (!datosUsuarios[cedula]) {
        Swal.fire('No encontrado', 'La cédula no se encuentra en la base de datos.', 'error');
        nombreField.value = "";
        return;
      }

      nombreField.value = datosUsuarios[cedula];
      Swal.fire('Validación exitosa', `Cédula válida. Estudiante: ${datosUsuarios[cedula]}`, 'success');
    }

    function generarDiploma() {
      const cedula = document.getElementById("cedula").value.trim();
      const nombre = document.getElementById("nombre").value.trim();
      const programa = document.getElementById("programa").value;

      if (!nombre) return Swal.fire('Atención', 'Debe validar primero la cédula.', 'warning');
      if (!programa) return Swal.fire('Campo faltante', 'Seleccione un programa del listado.', 'warning');

      Swal.fire({
        title: 'Confirmación',
        html: `
          <p><b>Nombre:</b> ${nombre}</p>
          <p><b>Cédula:</b> ${cedula}</p>
          <p><b>Programa:</b> ${programa}</p>
          <p>¿Desea generar el diploma con estos datos?</p>
        `,
        icon: 'question',
        showCancelButton: true,
        confirmButtonText: 'Sí, generar',
        cancelButtonText: 'Cancelar'
      }).then(result => {
        if (result.isConfirmed) generarPDF(nombre, cedula, programa);
      });
    }

    function generarPDF(nombre, cedula, programa) {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF({ orientation: "landscape" });

      const fecha = new Date();
      const dia = fecha.getDate();
      const mes = fecha.toLocaleString('es-ES', { month: 'long' });
      const anio = fecha.getFullYear();

      const img = new Image();
      img.src = "img/certificado.png";

      img.onload = function() {
        doc.addImage(img, "JPEG", 0, 0, 297, 210);
        doc.setFont("times", "bold");
        doc.setFontSize(22);
        doc.text("INSTITUTO DE FORMACIÓN IFOBE", 148, 35, { align: "center" });
        doc.setFontSize(14);
        doc.text("NIT. 901753803-7 | CÓDIGO 8065 APOYO A LA EDUCACIÓN", 148, 45, { align: "center" });
        doc.text("Régimen de ley 115 de 1994 | Resolución 7/23/2024", 148, 52, { align: "center" });
        doc.text("Número de resolución nacional: R2024031453", 148, 60, { align: "center" });

        doc.setFontSize(18);
        doc.text("OTORGADO A CONSTANCIA DE ASISTENCIA A:", 148, 75, { align: "center" });
        doc.setFontSize(24);
        doc.text(nombre, 148, 95, { align: "center" });
        doc.setFontSize(16);
        doc.text(`Cédula: ${cedula}`, 148, 110, { align: "center" });
        doc.text(`Por haber culminado el curso en: ${programa}`, 148, 125, { align: "center" });

        const texto = "El presente certificado acredita la participación y aprobación del estudiante en el curso, validando las competencias adquiridas en la materia. Este documento tiene validez oficial y respalda los conocimientos desarrollados.";
        const lineas = doc.splitTextToSize(texto, 250);
        doc.setFontSize(12);
        doc.text(lineas, 148, 140, { align: "center" });
        doc.text(`Otorgado en Ciudad, a los ${dia} días del mes de ${mes} del año ${anio}.`, 148, 165, { align: "center" });

        doc.setFontSize(14);
        doc.text("_________________________", 70, 175, { align: "center" });
        doc.text("Armando Álvarez", 70, 185, { align: "center" });
        doc.text("Director de Administración", 70, 195, { align: "center" });

        doc.text("_________________________", 220, 175, { align: "center" });
        doc.text("César Augusto", 220, 185, { align: "center" });
        doc.text("Coordinador Académico", 220, 195, { align: "center" });

        doc.save(`Certificado_IFOBE_${nombre}.pdf`);
      };
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
